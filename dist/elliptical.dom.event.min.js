!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n(require("elliptical-class")):"function"==typeof define&&define.amd?define(["elliptical-class"],n):(t.elliptical=t.elliptical||{},t.elliptical.DomEvent=n(t.elliptical.Class),t.returnExports=t.elliptical.DomEvent)}(this,function(t){var n="scroll.infinite",e=100;return t.extend({_events:[],_node:null,_context:this,events:{},event:function(t,n,e,i){var o={};o.element=t,o.event=n;var c=arguments.length;3===c&&(i="function"==typeof e?e:null,e=null),o.selector=e,o.callback=i,this._events.push(o),e?t.on(n,e,function(){var t=[].slice.call(arguments);i&&i.apply(this._context,t)}):t.on(n,function(){var t=[].slice.call(arguments);i&&i.apply(this._context,t)})},bind:function(){var t=this._events;for(var n in t)t.hasOwnProperty(n)&&this._bindEvent(t,n)},unbind:function(){for(var t=this._events,n=t.length,e=0;n>e;e++){var i=t[e];i.selector?i.element.off(i.event,i.selector):i.element.off(i.event)}t.length=0},onScroll:function(){var t=function(){var t=$(document).height()-$(window).height();$(window).scrollTop()>t-e&&callback&&callback()},i=function(){window.requestAnimationFrame(t)};this.event($(window),n,i)},scrollOff:function(){for(var t=this._events,e=t.length,i=0;e>i;i++){var o=t[i];if(o.event===n){o.selector?o.element.off(o.event,o.selector):o.element.off(o.event),t.splice(i);break}}},register:function(t){t.length&&t.forEach(function(t){this._isRegistered(t)||document.registerElement(t)})},load:function(t,n){var e=new Image;e.onload=function(){n(this)},e.src=t},preload:function(t,n){var e=[],i={},o=$(t),c=o.find("img"),r=c.length,l=0;return 0===r?(n&&n(null),!1):($.each(c,function(t,o){var c=new Image;$(c).bind("load",function(t){l++,e.push(c),l===r&&n&&(i.images=e,i.length=l,n(i))}),c.src=o.src}),!0)},_click:function(){return"ontouchend"in document?"touchstart":"click"},_press:function(){return"ontouchend"in document?"touchend":"click"},_tap:function(){return"ontouchend"in document?"tap":"click"},_getEvent:function(t){return"click"===t?this._click():"press"===t?this._press():"tap"===t?this._tap():t},_bindEvent:function(t,n){var e,i=t[n],o=n.split("@"),c=o.length;if(1===c)e=this._getEvent(o[0]),this.event(this._node,e,i);else if(2===c){var r=o[0];e=this._getEvent(o[1]),"document"===r&&this.event($(document),e,i),"window"===r?this.event($(window),e,i):this.event(this.element,e,r,i)}},_isRegistered:function(t){return document.createElement(t).constructor!==HTMLElement}},{init:function(t,n){t&&void 0!==t&&void 0!==t.nodeName&&(this.constructor._node=$(t)),n&&void 0!==n&&(this.constructor._context=n)},event:function(t,n,e,i){this.constructor.event(t,n,e,i)},bind:function(){this.constructor.bind()},unbind:function(){this.constructor.unbind()},onScroll:function(){this.constructor.onScroll()},scrollOff:function(){this.constructor.scrollOff()},register:function(){this.constructor.register()},load:function(t,n){this.constructor.load(t,n)},preload:function(t,n){this.constructor.preload(t,n)}})});