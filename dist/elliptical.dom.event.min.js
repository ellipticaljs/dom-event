!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):(t.elliptical=t.elliptical||{},t.elliptical.DomEvent=e(),t.returnExports=t.elliptical.DomEvent)}(this,function(){function t(t,i){this._events=[],this.events={},this._node=null,this._context=this,t&&void 0!==t&&void 0!==t.nodeName&&(this._node=$(t)),i&&void 0!==i&&(this._context=i),this.event=function(t,e,n,i){var o=this._context,s={};s.element=t,s.event=e;var c=arguments.length;3===c&&(i="function"==typeof n?n:null,n=null),s.selector=n,s.callback=i,this._events.push(s),n?t.on(e,n,function(){var t=[].slice.call(arguments);i&&i.apply(o,t)}):t.on(e,function(){var t=[].slice.call(arguments);i&&i.apply(o,t)})},this.bind=function(){var t=this._events;for(var e in t)t.hasOwnProperty(e)&&this._bindEvent(t,e)},this.unbind=function(){for(var t=this._events,e=t.length,n=0;e>n;n++){var i=t[n];i.selector?i.element.off(i.event,i.selector):i.element.off(i.event)}t.length=0},this.onScroll=function(){var t=function(){var t=$(document).height()-$(window).height();$(window).scrollTop()>t-n&&callback&&callback()},i=function(){window.requestAnimationFrame(t)};this.event($(window),e,i)},this.scrollOff=function(){for(var t=this._events,n=t.length,i=0;n>i;i++){var o=t[i];if(o.event===e){o.selector?o.element.off(o.event,o.selector):o.element.off(o.event),t.splice(i);break}}},this.register=function(t){var e=this;t.length&&t.forEach(function(t){e._isRegistered(t)||document.registerElement(t)})},this.load=function(t,e){var n=new Image;n.onload=function(){e(this)},n.src=t},this.preload=function(t,e){var n=[],i={},o=$(t),s=o.find("img"),c=s.length,l=0;return 0===c?(e&&e(null),!1):($.each(s,function(t,o){var s=new Image;$(s).bind("load",function(t){l++,n.push(s),l===c&&e&&(i.images=n,i.length=l,e(i))}),s.src=o.src}),!0)},this.find=function(t){return this._node?this._node.find(t):null},this._click=function(){return"ontouchend"in document?"touchstart":"click"},this._press=function(){return"ontouchend"in document?"touchend":"click"},this._tap=function(){return"ontouchend"in document?"tap":"click"},this._getEvent=function(t){return"click"===t?this._click():"press"===t?this._press():"tap"===t?this._tap():t},this._bindEvent=function(t,e){var n,i=this._node,o=t[e],s=e.split("@"),c=s.length;if(1===c)n=this._getEvent(s[0]),this.event(i,n,o);else if(2===c){var l=s[0];n=this._getEvent(s[1]),"document"===l&&this.event($(document),n,o),"window"===l?this.event($(window),n,o):this.event(i,n,l,o)}},this._isRegistered=function(t){return document.createElement(t).constructor!==HTMLElement}}var e="scroll.infinite",n=100;return t});